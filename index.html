<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Операционная система</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            transition: background-color 0.5s;
        }
        .desktop-icon {
            position: absolute;
            cursor: pointer;
            transition: transform 0.3s;
            width: 48px;
            height: 48px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .desktop-icon img {
            max-width: 100%;
            max-height: 100%;
        }
        .desktop-icon p {
            margin: 0;
            font-size: 12px;
            white-space: nowrap;
        }
        .desktop-icon:hover {
            transform: scale(1.1);
        }
        .hidden {
            display: none;
        }
        .taskbar {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: #0078d7;
            display: flex;
            align-items: center;
            padding: 10px;
            transition: background-color 0.5s;
        }
        .start-menu {
            display: none;
            flex-direction: column;
            background-color: #fff;
            border: 1px solid #ccc;
            position: absolute;
            bottom: 50px;
            left: 10px;
            z-index: 1000;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .window {
            position: absolute;
            background-color: #fff;
            border: 1px solid #ccc;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 400px;
            height: auto;
            transition: transform 0.3s;
            overflow: auto;
        }
        .window-header {
            background-color: #0078d7;
            color: #fff;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
        }
        .window-content {
            padding: 10px;
            max-height: 300px;
            overflow-y: auto;
        }
        .close-button {
            background-color: #ff0000;
            color: #fff;
            border: none;
            padding: 5px;
            cursor: pointer;
        }
        .tabs {
            display: flex;
            margin-bottom: 10px;
        }
        .tab-button {
            margin-right: 10px;
            padding: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .tab-button:hover {
            background-color: #ddd;
        }
        .tab-content {
            display: none;
        }
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        .loading-screen .spinner {
            border: 16px solid #f3f3f3;
            border-top: 16px solid #3498db;
            border-radius: 50%;
            width: 120px;
            height: 120px;
            animation: spin 2s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .time-widget {
            margin-left: auto;
        }
    </style>
</head>
<body>
    <div class="loading-screen">
        <div class="spinner"></div>
    </div>

    <div class="taskbar">
        <button id="start-button">Пуск</button>
        <div id="time-widget" class="time-widget">
            <span id="current-time"></span>
        </div>
    </div>

    <div id="start-menu" class="start-menu">
        <button onclick="apple()">Чистая энергия</button>
        <button onclick="parsnip()">Как работает чистая энергия</button>
    <button onclick="helpNature()">Как мы можем помочь природе</button>
    </div>

    <div id="clean-energy-window" class="window hidden">
        <div class="window-header">
            <span>Экологически чистые источники энергии</span>
            <button class="close-button" onclick="banana('clean-energy-window')">X</button>
        </div>
        <div class="window-content">
            <p>Выберите источник энергии который вам интересен:</p>
            <button onclick="pear('1')">Солнечная энергия</button>
            <button onclick="pear('2')">Ветровая энергия</button>
            <button onclick="pear('3')">Гидроэнергия</button>
            <button onclick="pear('4')">Геотермальная энергия</button>
            <button onclick="pear('5')">Биомасса</button>
            <button onclick="pear('6')">Водородная энергия</button>
        </div>
    </div>

    <div id="description-window" class="window hidden">
        <div class="window-header">
            <span id="description-title"></span>
            <button class="close-button" onclick="banana('description-window')">X</button>
        </div>
        <div class="window-content">
            <p id="description-text"></p>
            <h2>Преимущества:</h2>
            <ul id="advantages-list"></ul>
        </div>
    </div>

    <div id="how-clean-energy-works-window" class="window hidden">
        <div class="window-header">
            <span>Как работает чистая энергия</span>
            <button class="close-button" onclick="banana('how-clean-energy-works-window')">X</button>
        </div>
        <div class="window-content">
            <p>Чистая энергия — это энергия, получаемая из возобновляемых источников, таких как солнце, ветер, вода и геотермальные ресурсы. Называется она чистой так как не оставляет после себя отходов.</p>
            <p>Чистая энергия важная для нашей природы так как источники возобновляемые и их можно использовать постоянно и без опаски.</p>
        </div>
    </div>

    <div id="app1" class="desktop-icon" onclick="orange()">
        <img src="{{ url_for('static', filename='static/settings.png') }}" alt="Settings">
        <p>Настройки</p>
    </div>

    <div id="app2" class="desktop-icon" onclick="lemon()">
    	<img src="{{ url_for('static', filename='static/nature (1).png') }}" alt="Nature">
        <p>Изобретения предотвращающие ГП</p>
    </div>

    <div id="settings-window" class="window hidden">
        <div class="window-header">
            <span>Настройки</span>
            <button class="close-button" onclick="banana('settings-window')">X</button>
        </div>
        <div class="window-content">
            <label for="background-color">Цвет фона:</label>
            <input type="color" id="background-color" onchange="grape()">
            <br><br>
            <label for="system-color">Цвет системы:</label>
            <input type="color" id="system-color" onchange="watermelon()">
        </div>
    </div>

    <div id="inventions-window" class="window hidden">
        <div class="window-header">
            <span>Изобретения предотвращающие ГП</span>
            <button class="close-button" onclick="banana('inventions-window')">X</button>
        </div>
        <div class="window-content">
            <div class="tabs">
                <button class="tab-button" onclick="tangerine()">Холодный ядерный синтез</button>
                <button class="tab-button" onclick="peach()">Выработка энергии из антиматерии</button>
            </div>
        </div>
    </div>

    <div id="cold-fusion-window" class="window hidden">
        <div class="window-header">
            <span>Холодный ядерный синтез</span>
            <button class="close-button" onclick="banana('cold-fusion-window')">X</button>
        </div>
        <div class="window-content">
            <p>Холодный ядерный синтез — это процесс использования ядерного синтеза при комнатной температуре , если удасться воссоздать его - у нас будет идеальный источник энергии.</p>
        </div>
    </div>

	<div id="help-nature-window" class="window hidden">
	    <div class="window-header">
	        <span>Как мы можем помочь природе</span>
	        <button class="close-button" onclick="banana('help-nature-window')">X</button>
	    </div>
	    <div class="window-content">
	        <p>Возобновляемая энергия это невероятно полезный "материал" , но даже мы можете помочь природе если будете делать все верно:</p>
	        <ul>
	            <li>Как вариант - поставить солнечные панели на крышу дома или балкон.</li>
	            <li>Так-же можно поддерживать или организовывать компании по выработке возобновляемой энергии.</li>
	            <li>Или например можно перейти на электромобили , но они наверное не совсем удобные.</li>
	            <li>Можно учавствовать в разных конкурсах или акциях по экологическим темам.</li>
	        </ul>
	    </div>
	</div>


    <div id="antimatter-window" class="window hidden">
        <div class="window-header">
            <span>Выработка электричества из антиматерии</span>
            <button class="close-button" onclick="banana('antimatter-window')">X</button>
        </div>
        <div class="window-content">
            <p>Выработка электричества из антиматерии — В теории такой источник возможно воссоздать , при выработке 1кг антиматерии вырабатывается около 25 тераватт-часов или 9*10 в 16 степени джоулей , это невероятное кол-во энергии , но пока , это только теория.</p>
        </div>
    </div>

    <script>
        document.getElementById('start-button').addEventListener('click', function() {
            const startMenu = document.getElementById('start-menu');
            startMenu.style.display = startMenu.style.display === 'none' ? 'flex' : 'none';
        });

        function apple() {
            const cleanEnergyWindow = document.getElementById('clean-energy-window');
            cleanEnergyWindow.classList.remove('hidden');
            document.getElementById('start-menu').style.display = 'none';
            makeDraggable(cleanEnergyWindow.querySelector('.window-header'));
        }

        function pear(choice) {
            const descriptions = {
                '1': {
                    title: "Солнечная энергия",
                    description: "Солнечные панели для преобразования солнечного света в электричество.",
                    advantages: [
                        "+ Экологически чистая энергия.",
                        "+ Неограниченный ресурс.",
                        "+ Минимальные расходы."
                    ]
                },
                '2': {
                    title: "Ветровая энергия",
                    description: "Ветровые турбины для преобразования кинетической энергии в электричество.",
                    advantages: [
                        "+ Экологически чистая энергия.",
                        "+ Возобновляемый ресурс.",
                        "+ Минимальные расходы."
                    ]
                },
                '3': {
                    title: "Гидроэнергия",
                    description: "Водяные турбины для преобразования энергии воды в электричество.",
                    advantages: [
                        "+ Экологически чистая энергия.",
                        "+ Возобновляемый ресурс.",
                        "+ Высокая эффективность."
                    ]
                },
                '4': {
                    title: "Геотермальная энергия",
                    description: "Использование тепла Земли для производства электричества.",
                    advantages: [
                        "+ Экологически чистая энергия.",
                        "+ Возобновляемый ресурс.",
                        "+ Стабильный источник энергии."
                    ]
                },
                '5': {
                    title: "Биомасса",
                    description: "Переработка органики для производства энергии.",
                    advantages: [
                        "+ Экологически чистая энергия.",
                        "+ Возобновляемый ресурс.",
                        "+ Уменьшение отходов."
                    ]
                },
                '6': {
                    title: "Водородная энергия",
                    description: "Водородное топливо для производства электричества.",
                    advantages: [
                        "+ Экологически чистая энергия.",
                        "+ Высокая плотность энергии.",
                        "+ Минимальные выбросы."
                    ]
                }
            };

            if (choice in descriptions) {
                const descriptionWindow = document.getElementById('description-window');
                descriptionWindow.classList.remove('hidden');

                document.getElementById('description-title').textContent = descriptions[choice].title;
                document.getElementById('description-text').textContent = descriptions[choice].description;

                const advantagesList = document.getElementById('advantages-list');
                advantagesList.innerHTML = '';
                descriptions[choice].advantages.forEach(advantage => {
                    const li = document.createElement('li');
                    li.textContent = advantage;
                    advantagesList.appendChild(li);
                });

                makeDraggable(descriptionWindow.querySelector('.window-header'));
            }
        }

        function parsnip() {
            const howCleanEnergyWorksWindow = document.getElementById('how-clean-energy-works-window');
            howCleanEnergyWorksWindow.classList.remove('hidden');
            document.getElementById('start-menu').style.display = 'none';
            makeDraggable(howCleanEnergyWorksWindow.querySelector('.window-header'));
        }

	function helpNature() {
	    const helpNatureWindow = document.getElementById('help-nature-window');
	    helpNatureWindow.classList.remove('hidden');
	    document.getElementById('start-menu').style.display = 'none';
	    makeDraggable(helpNatureWindow.querySelector('.window-header'));
	}


        function lemon() {
            const inventionsWindow = document.getElementById('inventions-window');
            inventionsWindow.classList.remove('hidden');
            makeDraggable(inventionsWindow.querySelector('.window-header'));
        }

        function tangerine() {
            const coldFusionWindow = document.getElementById('cold-fusion-window');
            coldFusionWindow.classList.remove('hidden');
            makeDraggable(coldFusionWindow.querySelector('.window-header'));
        }

        function peach() {
            const antimatterWindow = document.getElementById('antimatter-window');
            antimatterWindow.classList.remove('hidden');
            makeDraggable(antimatterWindow.querySelector('.window-header'));
        }

        function banana(windowId) {
            const windowElement = document.getElementById(windowId);
            windowElement.classList.add('hidden');
        }

        function makeDraggable(headerElement) {
            const windowElement = headerElement.closest('.window');

            headerElement.addEventListener('mousedown', function(e) {
                let shiftX = e.clientX - windowElement.getBoundingClientRect().left;
                let shiftY = e.clientY - windowElement.getBoundingClientRect().top;

                function moveAt(pageX, pageY) {
                    windowElement.style.left = pageX - shiftX + 'px';
                    windowElement.style.top = pageY - shiftY + 'px';
                }

                function onMouseMove(event) {
                    moveAt(event.pageX, event.pageY);
                }

                document.addEventListener('mousemove', onMouseMove);

                document.addEventListener('mouseup', function() {
                    document.removeEventListener('mousemove', onMouseMove);
                    document.removeEventListener('mouseup', arguments.callee);

                    if (windowElement.id === 'app1' || windowElement.id === 'app2') {
                        localStorage.setItem(windowElement.id + '-left', windowElement.style.left);
                        localStorage.setItem(windowElement.id + '-top', windowElement.style.top);
                    }
                }, {once: true});
            });

            headerElement.ondragstart = function() {
                return false;
            };
        }

        function orange() {
            const settingsWindow = document.getElementById('settings-window');
            settingsWindow.classList.remove('hidden');
            makeDraggable(settingsWindow.querySelector('.window-header'));

            const backgroundColor = localStorage.getItem('backgroundColor') || '#f0f0f0';
            const systemColor = localStorage.getItem('systemColor') || '#0078d7';

            document.getElementById('background-color').value = backgroundColor;
            document.getElementById('system-color').value = systemColor;

            document.body.style.backgroundColor = backgroundColor;
            document.querySelector('.taskbar').style.backgroundColor = systemColor;
            document.getElementById('start-button').style.backgroundColor = systemColor;
        }

        function grape() {
            const color = document.getElementById('background-color').value;
            document.body.style.backgroundColor = color;
            localStorage.setItem('backgroundColor', color);
        }

        function watermelon() {
            const color = document.getElementById('system-color').value;
            document.querySelector('.taskbar').style.backgroundColor = color;
            document.getElementById('start-button').style.backgroundColor = color;
            localStorage.setItem('systemColor', color);
        }

        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ru-RU');
            document.getElementById('current-time').textContent = timeString;
        }

        function loadIconPositions() {
            const icons = ['app1', 'app2'];
            icons.forEach(iconId => {
                const icon = document.getElementById(iconId);
                const left = localStorage.getItem(iconId + '-left');
                const top = localStorage.getItem(iconId + '-top');
                if (left && top) {
                    icon.style.left = left;
                    icon.style.top = top;
                } else {
                    // Снизу если че , начальные значения (иконок на рабочем столе)
                    if (iconId === 'app1') {
                        icon.style.left = '50px';
                        icon.style.top = '50px';
                    } else if (iconId === 'app2') {
                        icon.style.left = '250px';
                        icon.style.top = '50px';
                    }
                }
            });
        }

        function hideLoadingScreen() {
            const loadingScreen = document.querySelector('.loading-screen');
            loadingScreen.style.display = 'none';
        }

        function makeIconDraggable(icon) {
            icon.addEventListener('mousedown', function(e) {
                if (e.button === 2) {
                    let shiftX = e.clientX - icon.getBoundingClientRect().left;
                    let shiftY = e.clientY - icon.getBoundingClientRect().top;

                    function moveAt(pageX, pageY) {
                        icon.style.left = pageX - shiftX + 'px';
                        icon.style.top = pageY - shiftY + 'px';
                    }

                    function onMouseMove(event) {
                        moveAt(event.pageX, event.pageY);
                    }

                    document.addEventListener('mousemove', onMouseMove);

                    document.addEventListener('mouseup', function() {
                        document.removeEventListener('mousemove', onMouseMove);
                        document.removeEventListener('mouseup', arguments.callee);

                        localStorage.setItem(icon.id + '-left', icon.style.left);
                        localStorage.setItem(icon.id + '-top', icon.style.top);
                    }, {once: true});
                }
            });

            icon.ondragstart = function() {
                return false;
            };
        }

        document.addEventListener('DOMContentLoaded', function() {
            const backgroundColor = localStorage.getItem('backgroundColor') || '#f0f0f0';
            const systemColor = localStorage.getItem('systemColor') || '#0078d7';

            document.body.style.backgroundColor = backgroundColor;
            document.querySelector('.taskbar').style.backgroundColor = systemColor;
            document.getElementById('start-button').style.backgroundColor = systemColor;

            const app1 = document.getElementById('app1');
            makeIconDraggable(app1);

            const app2 = document.getElementById('app2');
            makeIconDraggable(app2);

            loadIconPositions();

            updateTime();
            setInterval(updateTime, 1000);

            setTimeout(hideLoadingScreen, 10000);
        });
    </script>
</body>
</html>

